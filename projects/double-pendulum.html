<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400italic,400,700italic,700|Arbutus+Slab:400' rel='stylesheet' type='text/css'>
    <link href='../assets/stylesheets/fonts.css' rel='stylesheet' type='text/css'>
    <link href='../assets/stylesheets/base.css' media='screen' rel='stylesheet' type='text/css'>
    <link href='../assets/stylesheets/code_snippet.css' media='screen' rel='stylesheet' type='text/css'>
    <script src='http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' type='text/javascript'></script>
    <script type='text/x-mathjax-config'>
      MathJax.Hub.Config({
      tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
      }
      });
    </script>
    <title>Double Pendulum</title>
  </head>
  <body>
    <header>
      <div class='inner'>
        <h1 style='margin-bottom: 5px'>Double Pendulum</h1>
        <h2 style='margin-top: 5px;margin-bottom: 30px'>This repo contains simple physics simulations</h2>
      </div>
    </header>
    <div id='content-wrapper'>
      <div class='inner clearfix'>
        <section id='main-content'>
          <a class='anchor' href='../projects/double-pendulum-sim.html'>Double Pendulum.</a>
          <p>
            The Double Pendulum is a simple yet rich physical system. The motion of the pendulums is governed by a pair of coupled differential equations, which we will solve using the Euler method.
            To simulate the system let's first create the methods to draw the balls and the strings that hold them together.
            Now, we have to figure out the way the strings and the balls are going to move, i.e., we need to solve the equations of motion for the system.
            Let's start by expressing the cartesian coordinates of the two pendulums
            $$x_1 = l_1\sin \theta_1$$
            $$y_1 = -l_1\cos \theta_1$$
            $$x_2 = l_1\sin \theta_1 + l_2\sin \theta_2$$
            $$y_2 = -l_1\cos \theta_1 -l_2\cos \theta_2$$
            We will solve the equations of motion in polar coordinates and we are going to use the Lagrangian $L = T- V$ to derive them.
            The Kinetic energy of the system is
            $$T = \frac{1}{2}m_1(\dot{x_1}^2+\dot{y_1}^2)+\frac{1}{2}m_2(\dot{x_2}^2+\dot{y_2}^2)$$
            which expressed in polar coordinates is
            $$T = \frac{1}{2}m_1h_1^2\dot{\theta_1}^2+\frac{1}{2}m_2\left(h_1^2\dot{\theta_1}^2+h_2^2\dot{\theta_2}^2+2h_1h_2\dot{\theta_1}\dot{\theta_2}\cos(\theta_1-\theta_2)\right)$$
            The potential energy of the system is
            $$V = m_1gy_1+m_2gy_2 = -(m_1+m_2)gl_1\cos \theta_1 - m_2 g l_2 \cos \theta_2 $$
            The Lagrange equations for $\theta_1$ and $\theta_2$ are
            $$ \frac{d}{dt}\left(\frac{\partial L}{\partial\dot{\theta_i}}\right) - \frac{\partial L}{\partial \theta_i} = 0 $$
            Working out the details of the two Lagrange equations, we end up with
            $$ \ddot{\theta_1} =\frac{g\left(\sin \theta_2 \cos (\theta_1-\theta_2)- \left(1+\frac{m_1}{m_2}\right)\sin \theta_1\right)-\left(l_2\dot{\theta_1}\dot{\theta_2}+l_1\dot{\theta_1}^2\cos (\theta_1-\theta_2)\right)\sin (\theta_1-\theta_2)}{l_1\left(1+\frac{m_1}{m_2}-\cos^2 (\theta_1-\theta_2)\right)}$$
            $$ \ddot{\theta_2} = \frac{g\left(1+\frac{m_1}{m_2}\right)(\sin \theta_1\cos (\theta_1 - \theta_2) - \sin \theta_2)+\left(\left(1+\frac{m_1}{m_2}\right)l_1\dot{\theta_1}^2+l_2\dot{\theta_2}^2\cos(\theta_1-\theta_2)\right)\sin(\theta_1-\theta_2)}{l_2\left(1+\frac{m_1}{m_2}-\cos^2 (\theta_1-\theta_2)\right)}$$
            Now, to solve the equations of motion for the angles we can use the Euler method. To do that we just have to define a time interval and iterate over time.
            The angular accelerations, velocities and positions for the instant $t+\Delta t$ are all calculated using the same variables in $t$. Once we calculate the new angles we just need to update the positions of the balls and strings and re-draw the elements.
            This is a double pendulum simulation written in less than 100 lines of javscript. Go ahead and play with it
            <a class='anchor' href='../projects/double-pendulum-sim.html'>demo!</a>
            Learn more about the double pendulum on
            <a class='anchor' href='http://en.wikipedia.org/wiki/Double_pendulum'>wikipedia</a>.
          </p>
          <pre><code class='code'>function drawLine(myLine, context) {&#x000A;  context.beginPath();&#x000A;  context.moveTo(myLine.x0, myLine.y0);&#x000A;  context.lineTo(myLine.x, myLine.y);&#x000A;  context.strokeStyle = 'red';&#x000A;  context.stroke();&#x000A;}</code></pre>
          <pre><code class='code'>function drawCircle(myCircle, context) {&#x000A;  context.beginPath();&#x000A;  context.arc(myCircle.x, myCircle.y, myCircle.mass, 0, 2 * Math.PI, false);&#x000A;  context.fillStyle = '#000';&#x000A;  context.fill();&#x000A;  context.lineWidth = 5;&#x000A;  context.strokeStyle = 'black';&#x000A;  context.stroke();&#x000A;}</code></pre>
          <pre><code class='code'>function animate(myCircle1, myCircle2, myLine1, myLine2, canvas, context) {&#x000A;/**/&#x000A;  myCircle1.x = X0+l1*Math.sin(Phi1);&#x000A;  myCircle1.y = Y0+l1*Math.cos(Phi1);&#x000A;  myCircle2.x = X0+l1*Math.sin(Phi1)+l2*Math.sin(Phi2);&#x000A;  myCircle2.y = Y0+l1*Math.cos(Phi1)+l2*Math.cos(Phi2);&#x000A;&#x000A;  myLine1.x  = myCircle1.x;&#x000A;  myLine1.y  = myCircle1.y;&#x000A;  myLine2.x0 = myCircle1.x;&#x000A;  myLine2.y0 = myCircle1.y;&#x000A;  myLine2.x  = myCircle2.x;&#x000A;  myLine2.y  = myCircle2.y;&#x000A;&#x000A;  context.clearRect(0, 0, canvas.width, canvas.height);&#x000A;&#x000A;  drawLine(myLine1, context);&#x000A;  drawLine(myLine2, context);&#x000A;  drawCircle(myCircle1, context);&#x000A;  drawCircle(myCircle2, context);&#x000A;}&#x000A;&#x000A;</code></pre>
          <pre><code class='code'>function run(){&#x000A;  var myLine1 = {x0: X0, y0: Y0, x: 0, y: 0};&#x000A;  var myLine2 = {x0: 0, y0: 0, x: 0, y: 0};&#x000A;  var myCircle1 = {x: X0+l1*Math.sin(Phi1),&#x000A;                   y: Y0+l1*Math.cos(Phi1), mass: m1};&#x000A;  var myCircle2 = {x: X0+l1*Math.sin(Phi1)+l2*Math.sin(Phi2),&#x000A;                   y: Y0+l1*Math.cos(Phi1)+l2*Math.cos(Phi2), mass: m2};&#x000A;&#x000A;  clearInterval(init);&#x000A;  context.clearRect(0, 0, canvas.width, canvas.height);&#x000A;  init = setInterval(function(){&#x000A;    animate(myCircle1, myCircle2, myLine1, myLine2, canvas, context);&#x000A;  }, 20);&#x000A;}</code></pre>
        </section>
        <aside id='sidebar'>
          <p class='repo-owner' style='margin-top: 50px'>
            Work by
            <a href='https://github.com/micaeloliveira'>micaeloliveira</a>
            and
            <a href='https://github.com/luisbatalha'>luisbatalha</a>.
          </p>
          <a class='button' href='https://github.com/micaeloliveira/physics-sandbox'>
            <small>
              View project on GitHub
            </small>
          </a>
        </aside>
      </div>
    </div>
  </body>
</html>
